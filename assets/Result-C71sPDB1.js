import{_ as h,d as o,e as s,g as m,n as a,t as d,h as p,F as f,i as x,f as n,j as b,k as v}from"./index-D_MvzuAN.js";const w={data(){return{resultData:null,imageError:!1}},mounted(){const e=localStorage.getItem("analysisResult");if(e)try{this.resultData=JSON.parse(e)}catch(t){console.error("Ошибка при разборе JSON:",t)}},computed:{healthScore(){return this.resultData?.healthScore??0},productImage(){return this.resultData?.productImage??"https://via.placeholder.com/300x200?text=Нет+изображения"},concerns(){return this.resultData?.concerns??[]},sortedConcerns(){const e={allergen:0,harm:1,description:2,healthy:3};return[...this.concerns].sort((t,c)=>{const i=e[t.type]!==void 0?e[t.type]:99,u=e[c.type]!==void 0?e[c.type]:99;return i-u})},scoreColorClass(){const e=this.healthScore;return e>=75?"text-green-600":e>=50?"text-yellow-600":"text-red-600"},scoreBackgroundClass(){const e=this.healthScore;return e>=75?"bg-green-500":e>=50?"bg-yellow-500":"bg-red-500"},scoreDescription(){const e=this.healthScore;return e>=75?"This product has high nutritional value and is recommended for consumption.":e>=50?"This product has moderate nutritional value. Consume in moderation.":"This product has low nutritional value. It is recommended to limit its consumption."}},methods:{handleImageError(){this.imageError=!0,this.resultData.productImage="https://via.placeholder.com/300x200?text=Ошибка+изображения"},goBack(){this.$router.push({name:"camera"})},getConcernCardClass(e){return{harm:"bg-red-50 border border-red-200",allergen:"bg-orange-50 border border-orange-200",healthy:"bg-green-50 border border-green-200",description:"bg-blue-50 border border-blue-200"}[e]||"bg-gray-50 border border-gray-200"},getConcernTextClass(e){return{harm:"text-gray-800",allergen:"text-gray-800",healthy:"text-gray-800",description:"text-gray-800"}[e]||"text-gray-800"},getConcernBadgeClass(e){return{harm:"bg-red-200 text-red-800",allergen:"bg-orange-200 text-orange-800",healthy:"bg-green-200 text-green-800",description:"bg-blue-200 text-blue-800"}[e]||"bg-gray-200 text-gray-800"},getConcernLabel(e){return{harm:"Harmful",allergen:"Allergen",healthy:"Benefit",description:"Info"}[e]||"Info"},getConcernIcon(e){const t={harm:{template:`
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
            </svg>
          `},allergen:{template:`
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-orange-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
            </svg>
          `},healthy:{template:`
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
          `},description:{template:`
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
            </svg>
          `}};return t[e]||t.description}}},y={class:"min-h-screen bg-[#3846e0] flex flex-col p-4 pb-20"},C={class:"flex-1 flex flex-col items-center justify-center w-full max-w-md mx-auto space-y-6"},_={class:"w-full bg-white rounded-2xl shadow-md overflow-hidden animate-fadeInUp"},I=["src"],B={class:"w-full bg-white rounded-2xl shadow-md p-5 animate-fadeInUp"},k={class:"flex justify-between items-center mb-3"},z={class:"w-full bg-gray-200 rounded-full h-4 overflow-hidden"},S={class:"text-center text-sm italic mt-3 text-gray-600"},D={key:0,class:"w-full space-y-3 animate-fadeInUp"},E={class:"flex-1"};function M(e,t,c,i,u,r){return n(),o("div",y,[s("div",C,[t[4]||(t[4]=s("h2",{class:"text-3xl font-bold text-white text-center animate-fadeIn"},"Product analyze",-1)),s("div",_,[s("img",{src:r.productImage,alt:"Изображение продукта",class:"w-full h-64 object-cover",onError:t[0]||(t[0]=(...l)=>r.handleImageError&&r.handleImageError(...l))},null,40,I)]),s("div",B,[s("div",k,[t[2]||(t[2]=s("span",{class:"text-gray-700 font-medium"},"Product healthy:",-1)),s("span",{class:a(["text-lg font-bold",r.scoreColorClass])},d(r.healthScore)+"/100",3)]),s("div",z,[s("div",{class:a(["h-full transition-all duration-500",r.scoreBackgroundClass]),style:p({width:`${r.healthScore}%`})},null,6)]),s("p",S,d(r.scoreDescription),1)]),r.sortedConcerns&&r.sortedConcerns.length?(n(),o("div",D,[t[3]||(t[3]=s("h3",{class:"text-lg font-semibold text-white mb-2"},"Analysis:",-1)),(n(!0),o(f,null,x(r.sortedConcerns,(l,g)=>(n(),o("div",{key:g,class:a(["w-full rounded-xl p-4 flex items-start gap-3 shadow-md",r.getConcernCardClass(l.type)])},[(n(),b(v(r.getConcernIcon(l.type)),{class:"shrink-0 mt-0.5"})),s("div",E,[s("span",{class:a(["text-sm leading-snug block",r.getConcernTextClass(l.type)])},d(l.content),3),s("span",{class:a(["text-xs mt-1 inline-block px-2 py-0.5 rounded-full",r.getConcernBadgeClass(l.type)])},d(r.getConcernLabel(l.type)),3)])],2))),128))])):m("",!0),s("button",{onClick:t[1]||(t[1]=(...l)=>r.goBack&&r.goBack(...l)),class:"w-full bg-white text-indigo-600 font-semibold py-3 px-6 rounded-full shadow-md hover:bg-gray-100 transition duration-300 animate-fadeInUp"}," Сделать еще фото ")])])}const j=h(w,[["render",M],["__scopeId","data-v-ee5d75d9"]]);export{j as default};
